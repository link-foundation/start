{
  "issue": {
    "number": 28,
    "title": "Can we somehow overcome the need of `'` quotes with `|` and `\"` in a sequence?",
    "url": "https://github.com/link-foundation/start/issues/28",
    "state": "open",
    "labels": ["bug", "documentation", "enhancement", "question"],
    "author": "konard",
    "created_at": "2025-12-24"
  },
  "environment": {
    "platform": "darwin",
    "shell": "/bin/zsh",
    "bun_version": "1.2.20",
    "working_directory": "/Users/konard"
  },
  "scenarios": [
    {
      "name": "unquoted_command",
      "input": "$ echo \"hi\" | agent",
      "timestamp": "2025-12-24 15:07:08.894",
      "shell_interpretation": {
        "command_1": "$ echo \"hi\"",
        "operator": "|",
        "command_2": "agent"
      },
      "actual_execution": {
        "start_command_received": "echo \"hi\"",
        "start_command_output": "hi",
        "agent_received": "JSON output from start-command stdout"
      },
      "user_expectation": "agent should receive 'hi' from echo",
      "actual_result": "agent received start-command JSON output",
      "exit_code": 0
    },
    {
      "name": "quoted_command",
      "input": "$ 'echo \"hi\" | agent'",
      "timestamp": "2025-12-24 15:07:33.420",
      "shell_interpretation": {
        "command": "$",
        "argument": "echo \"hi\" | agent"
      },
      "actual_execution": {
        "start_command_received": "echo \"hi\" | agent",
        "pipeline_executed": true,
        "echo_output": "hi",
        "agent_received": "hi"
      },
      "user_expectation": "agent should receive 'hi' from echo",
      "actual_result": "agent received 'hi' from echo",
      "exit_code": 0
    }
  ],
  "root_cause": {
    "category": "shell_parsing_behavior",
    "is_bug": false,
    "description": "The pipe operator (|) is a shell metacharacter that is parsed by the shell before command arguments are passed. This is standard POSIX shell behavior, not a bug in start-command.",
    "affected_shells": ["bash", "zsh", "sh", "dash", "ksh"],
    "shell_parsing_order": [
      "1. Tokenization - command line split into tokens",
      "2. Operator recognition - | && || ; & recognized as metacharacters",
      "3. Command grouping - commands grouped based on operators",
      "4. Quote processing - quoted strings preserved",
      "5. Expansion - variables, commands, etc. expanded"
    ]
  },
  "solutions": {
    "recommended": "documentation_enhancement",
    "options": [
      {
        "id": "documentation_enhancement",
        "name": "Documentation Enhancement",
        "description": "Add clear documentation about quoting requirements",
        "pros": ["No code changes", "Educates users", "POSIX compliant"],
        "cons": ["Requires users to learn quoting rules"],
        "complexity": "low"
      },
      {
        "id": "warning_detection",
        "name": "Optional Warning Detection",
        "description": "Detect when stdout is piped and emit helpful warning",
        "pros": ["Helps users understand behavior", "Non-breaking"],
        "cons": ["May add noise to output"],
        "complexity": "medium"
      },
      {
        "id": "here_document",
        "name": "Here-Document Wrapper",
        "description": "Support $$ <<'CMD' syntax for multi-line commands",
        "pros": ["No quoting issues", "Clear syntax"],
        "cons": ["More verbose", "New syntax to learn"],
        "complexity": "high"
      }
    ]
  },
  "references": {
    "bash_manual": "https://www.gnu.org/software/bash/manual/bash.html",
    "pipelines_doc": "https://www.gnu.org/software/bash/manual/html_node/Pipelines.html",
    "quoting_doc": "https://www.gnu.org/software/bash/manual/html_node/Quoting.html",
    "posix_shell": "https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html"
  },
  "analysis_date": "2025-12-24",
  "analyst": "AI Issue Solver"
}
